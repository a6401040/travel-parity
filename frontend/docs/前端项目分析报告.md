# 前端项目分析报告（travel_helper/travel_helper）

## 项目总览
- 路径：`/Users/linzhichao/Downloads/travel_helper/travel_helper`
- 技术栈：原生 HTML + CSS + JavaScript（无打包、无框架）
- 已识别模块（基于已读取的 `prototype`）：
  - `prototype/index.html`：聊天主页面（顶部品牌、侧边历史、右侧聊天与底部输入）
  - `prototype/styles.css`：全局样式、响应式布局与背景图配置
  - `prototype/app.js`：消息渲染、历史记录（localStorage）、本地登录/注册、推荐卡片模拟
  - `prototype/settings.html`：设置页面（与主站样式一致，背景图来自本地 `prototype/bg/*`）

> 说明：当前分析工具未列出 `travel_helper/travel_helper/src`。如存在工程化源码（React/Vite/Webpack 等），请告知，我将基于该目录重新进行工程分析报告；以下内容以 `prototype/` 静态原型为主。

## 页面与交互
- 入口页面：`prototype/index.html`
  - 顶部（Hero）：品牌“出行助手”、副标题“与大模型对话 · 获得出行与文旅推荐”、操作区（历史记录、登录/注册、设置）
  - 布局：左侧历史侧栏（新建对话 + 历史列表），右侧聊天消息，底部输入栏（类似 ChatGPT）
  - 登录/注册弹窗：仅前端本地（localStorage）保存 `username`，未与后端会话对接
- 样式：`prototype/styles.css`
  - 字体：系统中文字体族；页面背景默认使用 Unsplash 外链（首页），设置页背景使用本地 `prototype/bg/*`（高清、非重复）
  - 响应式：宽度 <900px 时卡片/列表单列，气泡最大宽度 100%
- 交互：`prototype/app.js`
  - 状态：`state = { messages, user, history }`；与 localStorage 同步
  - 解析输入：`parseQuery(text)` 提取“从 A 去 B”和预算/价格优先
  - 推荐模拟：`mockSchemes/ mockHotels/ mockRoutes` 生成三类方案与酒店/路线卡片
  - 历史记录：`lvyou_history` 保存最近 50 条；点击历史项可复现对话与生成推荐
  - 登录注册：`lvyou_user` 仅存 `username`；退出清除本地值

## 启动运行
- 静态运行（无端口）：直接双击 `prototype/index.html` 在浏览器打开
- 使用静态服务器（推荐）：
  - `npx serve travel_helper/travel_helper/prototype`（默认 3000）
  - 或 `npx http-server travel_helper/travel_helper/prototype -p 3000`（或 8080）
- 与后端联动：后端默认端口为 `3001`；若前端采用 `fetch('/api/...')`，需同源或后端允许 CORS

## 与后端的对接建议
- 登录与会话：
  - 调用后端 `POST /api/auth/login`，成功后浏览器获得 `sid`（Cookie 或 `X-Session-ID`）；将本地登录替换为服务端会话
  - 退出：`POST /api/auth/logout`，清理会话与 Cookie
- 推荐编排：
  - 调用 `POST /api/llm/recommendations`，使用真实聚合数据（铁路/航班/酒店/POI/路线 + 引擎方案）替换 `mock*`
  - 卡片字段统一：段（`mode/optionId/departTime/arriveTime/price`）、方案（`totalTimeMinutes/totalPrice/transfers/score/reason`）、酒店（`name/rating/price`）、路线（`name/days/items`）
- 历史记录：
  - 调用 `GET/POST/DELETE /api/history`；前端显示摘要（出发→到达、最优价格/时长、时间戳）
- 下载导出：
  - `POST /api/export/llm/markdown|pdf`；提供“下载”按钮，支持选择导出格式（Markdown/PDF）

## 安全与会话
- 当前前端本地登录并不安全；建议：
  - 完全切换到后端 Redis 会话（Cookie `sid` 或 `X-Session-ID`），一日有效，过期需重新登录
  - 前端不保存敏感信息；localStorage 仅用于 UI 状态（如历史摘要），注意脱敏

## 资源与字体
- 背景资源：设置页使用本地图片；首页使用 Unsplash 外链。建议统一资源域并做缓存策略（CDN 或本地）
- 字体：后端已采用开源免费字体（建议 Noto Sans SC）；前端可通过 `@font-face` 引入（注意体积与加载策略）

## 质量与性能
- 优点：结构清晰、原生实现可快速运行；响应式布局与现代卡片风格；交互（消息与历史）直观
- 改进：需要后端数据接入；资源统一与性能优化；可访问性（ARIA/语义化标签/键盘导航）

## 开发联动优先级
1. 登录对接（替换 localStorage）
2. 编排推荐（调用后端，渲染真实数据）
3. 历史记录（接入后端，跨设备一致）
4. 下载导出（后端导出接口联动）
5. 资源优化（本地化或统一 CDN）

## 结论
- `travel_helper/travel_helper` 目前以 `prototype/` 静态原型为主，可演示 UI 与交互；为满足生产需求，需尽快对接后端 API（登录会话、推荐编排、历史与导出），并完善资源策略与可访问性。
- 如存在 `src/` 工程化源码，请提供目录内容，我将基于框架/构建配置生成进一步的工程分析报告。
